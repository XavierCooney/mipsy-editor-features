# Mipsy editor features

To install for the vscode, search for `Mipsy Editor Features` in the marketplace and click install. Please report bugs/feedback/feature requests [on GitHub](https://github.com/XavierCooney/mipsy-editor-features/issues).


Features:
 - A language server, providing:
   - Error reporting
   - Context specific code completion (instructions/directives/labels/constants/syscall numbers)
   - Document symbol information
 - A decompile button (vscode only)
 - A debugger adapter (should work with any editor). With it, you can:
   - run and single-step through programs
   - set line breakpoints
   - view register values
   - single-step back through time and run back through time
   - show the contents of memory of running programs (alas vscode only, since the DAP API for this isn't expressive enough so I had to use a custom webview panel)
   - dedicated output panel (again vscode only)
   - input queueing (use the `send to MIPS` button in the context menu on a file or a selection while debugging)
 - A syntax highlighting grammar (not semantic), generated by `generate_syntax.py`, which pulls data from `mipsy/mips.yaml`.
 - Automatically sets vscode tab settings for mips.

... and more!


Screenshot:
![A screenshot of vscode showing various features of the extension, including the debugger and diagonstic reporting](./screenshot-1.png?raw=true)


Language server diagonstics / decompile button / debugger all work by running mipsy compiled to WASM using `wasm-pack`. See `mipsy_vscode/src/lib.rs`.

TODO:
 - Add a hover provider to the language server
 - Add other watchpoints?
 - Improve code quality
 - Use a bundler to reduce extension size

Currently multiple file programs are only supported in the LSP (if I get time I'll also add support in the debugger). If you have a file `a.s` and want to have it linked with `b.s` and `c.s`, include the following line in `a.s`:
```
# @[multifile(a.s, b.s, c.s)]
```
The inclusion of `a.s` in the above line is optional, but makes it easy to copy this line into `b.s` and `c.s`. If you're using virtual workspaces, you'll be prompted by the language server to actually open `b.s` and `c.s` in your editor [due to a limitation in the language server protocol](https://github.com/microsoft/language-server-protocol/issues/1264).


To build, roughly:
```
git clone https://github.com/insou22/mipsy.git
npm i
./generate_syntax.py
(cd mipsy_vscode; wasm-pack build --target nodejs --debug)
npm run compile
```
