# mipsy vscode extension thingo (LSP + DAP)

WIP.

Features:
 - Language server (currently only provides error reporting, but shouldn't be too difficult to do other stuff). Currently the LSP is somewhat tightly coupled to vscode but it shouldn't be too difficult to make it work with other editors.
 - A decompile button (vscode only)
 - A debugger adapter (should work with any editor). Currently somewhat basic, but can run and single-step through programs, set line breakpoints, and view register values.
 - A syntax highlighting grammar (not semantic), generated by `generate_syntax.py`, which pulls data from `mipsy/mips.yaml`.
 - Automatically sets vscode tab settings for mips.


Language server / decompile button / debugger all work by running mipsy compiled to WASM using `wasm-pack`. See `mipsy_vscode/src/lib.rs`.

TODO:
 - Add hover + completion + go to definition to the language server
 - Make the debugger better handle output
 - Make the reverse step debugger button actually do something
 - Add other watchpoints?
 - Make the code not terrible
 - Publish vscode extension

I originally started this to learn how to write a language server / debugger adapter / vscode extension, as well learn rust (this is the first rust thing I've written which is more than like 15 lines long), but it's now turning into something slightly usefel?

Biggest caveat is that I have no idea how to allow users to specify that a specific file is part of a multi-file program.

To build, roughly:
```
git clone https://github.com/insou22/mipsy.git
npm i
./generate_syntax.py
(cd mipsy_vscode; wasm-pack build --target nodejs --debug)
npm run compile
```
