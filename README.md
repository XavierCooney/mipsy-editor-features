# Mipsy editor features

To install for the vscode, search for `Mipsy Editor Features` in the marketplace and click install. Please report bugs/feedback/feature requests [on GitHub](https://github.com/XavierCooney/mipsy-editor-features/issues).


Features:
 - A language server
   - Error reporting
   - Context specific code completion (instructions/directives/labels/constants/syscall numbers)
 - A decompile button (vscode only)
 - A debugger adapter (should work with any editor). With it, you can:
   - run and single-step through programs
   - set line breakpoints
   - view register values
   - single-step back through time and run back through time
   - show the contents of memory of running programs (alas vscode only, since the DAP API for this isn't expressive enough so I had to use a custom webview panel)
   - dedicated output panel (again vscode only)
 - A syntax highlighting grammar (not semantic), generated by `generate_syntax.py`, which pulls data from `mipsy/mips.yaml`.
 - Automatically sets vscode tab settings for mips.


Screenshot:
![A screenshot of vscode showing various features of the extension, including the debugger and diagonstic reporting](./screenshot-1.png?raw=true)


Language server diagonstics / decompile button / debugger all work by running mipsy compiled to WASM using `wasm-pack`. See `mipsy_vscode/src/lib.rs`.

TODO:
 - Add hover + go to definition to the language server
 - Add other watchpoints?
 - Fancier DAP features
 - Make the code not terrible
 - Use a bundler to reduce extension size

Note: this extension won't work properly with multi-file programs. If anyone can work out how to allow the user to easily specify which make up a multi-file programs please let me know.

To build, roughly:
```
git clone https://github.com/insou22/mipsy.git
npm i
./generate_syntax.py
(cd mipsy_vscode; wasm-pack build --target nodejs --debug)
npm run compile
```
